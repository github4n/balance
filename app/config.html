<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Config</title>
    <!--<script src="https://bitcoinrobot.cn/file/assets/bootstrap.4.1.3/js/jquery.slim.min.js"></script>-->
    <script src="https://bitcoinrobot.cn/file/assets/jquery.2.2.2/jquery.min.js"></script>

</head>
<body>
<div>
    <div style="width: 50px;height: 50px;background: gray;display: inline-block;cursor: pointer"><span
            style="line-height: 50px;padding-left: 7px;" onclick="restart()">重启</span></div>
    <div style="width: 50px;height: 50px;background: gray;display: inline-block;cursor: pointer"
         onclick="shutdown()"><span
            style="line-height: 50px;padding-left: 7px;">结束</span></div>
    <div style="width: 50px;height: 50px;background: gray;display: inline-block;cursor: pointer"
         onclick="log()"><span
            style="line-height: 50px;padding-left: 7px;">日志</span></div>
</div>
<br>
#tbd
</body>
<script>
    const path = "http://" + document.location.host;

    modify = (symbol, option) => {
        const id = `${symbol}_${option}`;
        let ele = $(`#${id}`);
        const test = $(`#${symbol}_${option}_val`);
        if (test.length === 0) {
            const input = $(`<input id="${symbol}_${option}_val" type="text" value=""/>`);
            const submit = $(`<input id="${symbol}_${option}_submit" type="button" value="修改" onclick="update('${symbol}','${option}')"/>`);
            ele.append(input);
            ele.append(submit);
        }
    };

    update = (symbol, option) => {
        const input = $(`#${symbol}_${option}_val`);
        const val = input.val();
        if (!input.val()) {
            alert("值不能为空！");
            return false;
        }
        const url = `${path}/modify?section=${symbol}&option=${option}&val=${val}`;
        console.log(url);
        $.get(url, null, (data) => {
            if (data === "ok") {
                $(`#${symbol}_${option}_val`).remove();
                $(`#${symbol}_${option}_submit`).remove();
                document.location.reload();
            }
        });
    };

    restart = () => {
        $.get(`${path}/restart`, null, (data) => {
            alert(data);
        });
    };

    shutdown = () => {
        $.get(`${path}/shutdown`, null, (data) => {
            alert(data);
        });
    };

    log = () => {
        location.href = `${path}/log`;
    };
</script>
</html>